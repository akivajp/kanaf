# 目次 #


<br />

# データ対応形式 #
> 対応画像形式 : BMP, PNG, TGA, JPEG, GIF<br />
> 対応音声形式 : WAV, OGG

# 諸注意 #
  * シナリオファイルの文字コードはAsciiとUTF-8のみ対応です。日本語を使いたい場合はUTF-8形式でファイルを保存して下さい。

# 書式 #
  * ## コメント ##
> > ラインコメント(行末まで無視される)
```
// コメント
```
> > ブロックコメント(/`*`と`*`/に挟まれた内容全てが無視される)
```
/*
  複数行に
  またがる
  コメントを書ける
*/
```
> > 二回連続したスラッシュ(//)からその行末まではコメント行として扱われ、実行されず表示されません。表示はしないけど覚書したい場合や、特定の行を無効にしたい場合などに用います。同様に、/`*`と`*`/で挟まれた部分はコメントとして扱われ、複数行にまたがる覚書や、複数の行を同時に無効にしたい場合などに用います。
  * ## ラベル指定 ##
> > セーブ/ロードの対象としたい時
```
#ラベル名|シーン名
```
> > ジャンプ先やサブルーチン呼び出しの対象としたいけど、セーブ位置には設定したくない時。
```
#ラベル名
```
> > <br />選択肢のジャンプ先やサブルーチン呼び出し、セーブ/ロードの対象となるターゲットを示します。ラベル名の前後に任意の数の半角スペースを入れても正しく認識しますが、ラベル名は半角スペース、タブ、改行、半角縦線(|)を含むことはできません。シーン名は半角スペースを含むことができます。

  * ## タグ ##
> > 属性を持たない、あるいは省略される時
```
[タグ名]
```
> > 属性を1つ指定する時
```
[タグ名 属性名=属性値]
```
> > 属性を2つ指定する時
```
[タグ名 属性名1=属性値1 属性名2=属性値2]
```
> > 属性が3つ以上の時も同様に増えていきます。<br />
> > 糖衣構文として、ある属性にtrueを与えたい場合のみ、属性名のみで属性値を省略できます。例えば、
```
[タグ名 enable]
```
> > は、
```
[タグ名 enable=true]
```
> > と解釈されます。<br />
> > タグ名は基本的に半角英数字です。属性名=属性値の区切りとしてスペースを入れますが、スペース以外にもタブや改行文字、カンマも区切り文字として有効です。属性値の指定の仕方は大きく分けて以下の2種類(リテラル指定、式展開)に分かれます。属性値には以下のリテラルを指定することができます。特に文字列と変数の違いに注意です。また、タグ固有の属性の他に、condという全タグ共通の属性があり、真偽値や条件式が与えられた場合、その値がfalseであればタグ実行がスキップされます。<br />
    * ## リテラル(定数)指定 ##
      * ## 文字列リテラル ##
> > > > "を使って指示する時 **(推奨)**
```
属性名="文字列"
```
> > > > 'を使って指示する時
```
属性名='文字列'
```
> > > > "や'を省略して指示する時
```
属性名=文字列
```
> > > > > ファイル名やラベル名の指定時には、上記のように"と"、あるいは'と'で囲われた文字列を属性値として指定する必要があります。"や'を省略して属性値を指定した時も文字列として認識されますが、この場合は文字列の中に半角スペースやタブ文字、改行文字、カンマなどを含むことができず制約が多いので、なるべく意識して"や'で囲むようにしましょう。
      * ## 数値リテラル ##

> > > > 固定小数点 (通常の数値指定)
```
  例 :
    属性名=0
    属性名=3.14
    属性名=-10
```
> > > > 浮動小数点指定 (固定小数点指定の後にeと10の指数を続ける)
```
  例 :
    属性名=1.23456e6
    (属性名=1234560と同義)

    属性名=7.25e-3
    (属性名=0.00725と同義)
```
> > > > `16`進数指定 (0xの後に16進コードを入力、整数のみ指定可能)
```
  例 :
    属性名=0xff
    (属性名=255と同義)

    属性名=-0x10
    (属性名=-16と同義)
```
> > > > 数値を指定する時に用います。上記の様に様々な書式がありますが、通常は一番上の固定小数点形式だけ理解すれば十分でしょう。数値を求める属性に文字列を指定しても内部で自動的に数値に変換されます。数式や変数を用いたい場合は後述する式展開を参照して下さい。
      * ## 真偽値リテラル ##
> > > > 属性値として以下のどちらかを指定します。
```
  属性名=true
  (真を表す)

  属性名=false
  (偽を表す)
```
> > > > 真偽値(ブーリアン)は、真か偽かを表す要素で、タグの特定の属性値に指定して、そのパラメーターが有効か無効かなどを指示します。真偽値を求める属性に文字列を指定した場合も、"true"ならtrue、"false"ならfalseに変換されます。また、真偽値を求める属性に数値を指定した場合は、1ならtrue、0ならfalseに変換されます。
      * ## 無効リテラル ##
```
nil
```
> > > > 無効リテラルは、**明示的\*に属性値を指定しない時に使います。変数値=変数名を省略した場合は変数値=nilとして認識されるので、あえてこれを書く必要はありません。
    * ## 式展開 ##

> > > (と)で囲んで指定します。
```
  属性名=(式)
```
> > > 属性値に対応する(と)で囲まれた部分が検出されると、その内容を式として認識し、計算や変数展開などを行い、最終的な値が属性値として指定されることになります。式には以下のようなものが指定可能です。
      * ## 文字列式 ##
> > > > 結合演算子(..)を用いて複数の文字列を結合して1つの文字列を生成可能。..は2つ連続した半角ピリオドです。
```
  属性名=("文字列1" .. "文字列2")
  属性名=("文字列1" .. "文字列2" .. "文字列3")
  ...
```
> > > > 文字列化関数(tostring)を用いて文字列ではない値(数値など)を文字列に変換可能。
```
  属性名=(tostring(10 / 4))
  (属性名="2.5"と同義)
```
      * ## 数式 ##
> > > > 四則演算子(+、-、`*`、/)や剰余演算子(%)などを用いて演算が可能。
```
  属性名=(1 * 2 * 3 * 4)
  (属性名=(24)と同義)

  属性名=(100 % 7)
  (属性名=(2)と同義)
```
> > > > 数値化関数(tonumber)を用いて数値ではない値(数値書式の文字列など)を数値に変換可能。
```
  属性名=(tonumber("125") + 1)
  (属性名=(126)と同義)
```
      * ## 論理式 ##
> > > > 真偽値と論理演算子(and、or、not)を用いて論理演算が可能。
```
  属性名=(true and false)
  (属性名=(false)と同義)
  属性名=(not false)
  (属性名=(true)と同義)
```
      * ## 変数 ##
> > > > 変数の書式は、テーブル名(sys、log、tmp、argsのいずれか).変数名(半角アルファベットか`_`で始まり、半角英数字が続く)です。
```
  具体例:
    属性名=(tmp.var)
    属性名=(sys.x)
    属性名=(sys._name)
    属性名=(log.id1)
    属性名=(log.id2)
    属性名=(tmp.long_name_variable)

  駄目な例:
    属性名=(tmp.100ms)
    (数字で始めることはできない)
    属性名=(tmp.変数名)
    (日本語は全角文字なので変数名にはなれない)

  数式と組み合わせる例 :
    属性名=(tmp.x + tmp.dx)
```
> > > > 変数は、別途説明しますが、別の場所で代入された数値や文字列などが入っていて、式の内部で指定されると、その中身が展開(評価)されます。もちろん数式などと変数を組み合わせることも可能です。テーブル名無しの変数名でも動作しますが、意図しない動作を避けるために必ずsys、log、tmp、argsのいずれかを指定するようにして下さい。sysはユーザの操作とは無関係に自動的にセーブ/ロードされるテーブル(システム変数)、logはユーザ操作によるセーブ/ロード時に更新されるテーブル(いわゆるセーブデータ)、tmpはアプリケーション起動の度に真っ更にリセットされるテーブル(一時変数)、argsはマクロやサブルーチンの呼び出し時に自動的に差し替えられてタグのパラメーターのやりとりを行うためのテーブル(スタック変数)となっています。
  * ## インラインスクリプト ##
```
[[
  -- Luaスクリプト
]]
```

> > Kanafはプログラミング言語Luaによって実装・実行されています。また、Kanafのシナリオスクリプトは、直接的にLuaのコードを呼び出して内部機能を呼び出したり、内部状態にアクセス・変更したりすることが可能です。この機能を用いなくとも多くの機能が用意されていますが、より柔軟で高速な処理が必要な時には有用です。ただし、Luaという異なるプログラミング言語の習得が必要です。通常は代入式だけ理解していれば十分でしょう。詳しい文法は http://milkpot.sakura.ne.jp/lua/lua51_manual_ja.html を参照して下さい。
    * ## 代入式 ##
```
[[
  変数名 = リテラル
]]

  具体例:
    [[
      tmp.x = 10
      tmp.y = tmp.x * 2 + 5
      tmp.name = "Player's name"
    ]]
```
  * ## マクロ ##
> > マクロはタグと全く同様の書式を持っています。
```
[マクロ名 属性名1=属性値1 属性名2=属性値2 ...]
```
> > マクロは[macro](#macro.md)タグと[endmacro](#endmacro.md)タグで挟まれた内容で定義され、タグやメッセージのまとまった内容をひとまとめにしておいて、何度も繰り返し実行される処理を簡潔に記述することができます。また、マクロ名はタグ名と異なり日本語の名前などをつけることも可能ですが、既存のタグ名と同じ名前をつけて置き換えることはできません。また、マクロ呼び出し時に与えられた**属性名=属性値**の組は、マクロ定義の内部で**args.属性名**という形で属性値にアクセスできるので、この値を使って内部のタグの属性を指定することができます。
  * ## エスケープ文字 ##
> > バックスラッシュ(\)とその直後にエスケープしたい文字を入れることで、スラッシュ(/)や[と]のような文字も通常の文字のようにしてメッセージ表示することができます。
```
  具体例:
    \/\/ (二回連続したスラッシュをコメントとして扱わずに表示したい)
    \[\] ([や]をタグとして扱わずにそのまま表示したい)
    \\ (バックスラッシュを通常文字として表示したい)
```
  * ## 通常文字 ##
> > 上記のいずれにも当てはまらないような文字は通常の文字として扱われ、一文字ずつメッセージとして処理されます。ただし、行頭の半角スペースやタブは無視するようになっているので、適度に字下げしてスクリプトを見やすくするのに有用です。(半角スペースはバックスラッシュでエスケープして表示可能) また、デフォルトの動作では、改行文字を検出してもメッセージは改行しません。メッセージを改行させる場合には[r](#r.md)タグを参照下さい。**

# タグ一覧(アルファベット順) #

(書きかけです)

  * ## anchor ##
> > クリック可能なテキストを表示します。<br />
> > 使用例 :
```
// クリック時にデフォルトブラウザで"http://kanaf.googlecode.com/"を開く。
[anchor text="リンクテキスト" href="http://kanaf.googlecode.com"]
```
> > 関連タグ :
    * [link](#link.md)
> > 属性 :<br />
| **属性名** | **別名** | **必須** | **値** | **デフォルト値** | **説明** |
|:--------|:-------|:-------|:------|:-----------|:-------|
| text    | txt    | **yes** | テキスト(文字列) | nil        | 表示するテキストを指定します。指定されない場合はタグ実行に失敗します。 |
| href    |        | no     | URL(文字列) | nil        | hrefにURLが指定された場合、デフォルトブラウザでリンク先を開きます。 |

  * ## backlog ##
> > バックログ表示に関する様々な操作を行います。<br />
> > 属性 : <br />
| **属性名** | **別名** | **必須** | **値** | **デフォルト値** | **説明** |
|:--------|:-------|:-------|:------|:-----------|:-------|
| show    |        | no     | 真偽値   | nil        | trueの時、バックログレイヤーを最上位レイヤーに設定して表示します。 |
| hide    |        | no     | 真偽値   | nil        | trueの時、バックログレイヤーを非表示にします。 |
| src     | bg<br />bg\_image | no     | 画像ファイル名(文字列) | nil        | バックログレイヤーの背景画像を設定します。 |
| alpha   | a<br />opaque | no     | 不透明度(0から255までの整数) | 元の値        | 背景画像の不透明度を設定します。 |
| seek\_init |        | no     | 真偽値   | nil        | trueの時、最も古いログを表示設置します。 |
| seek\_end |        | no     | 真偽値   | nil        | trueの時、最も新しいログを表示設定します。 |
| seek\_prev |        | no     | 真偽値   | nil        | trueの時、一つ前のログを表示設定します。 |
| seek\_next |        | no     | 真偽値   | nil        | trueの時、一つ後のログを表示設定します。 |

<br />
  * ## call ##
> > サブルーチンを呼び出します。サブルーチン以外のラベルは絶対に指定しないで下さい。<br />
> > 使用例 :
```
サブルーチンを呼び出します。[l][r]
[call target="#sub1"]
サブルーチンから復帰しました。[p][cm]

#sub1
サブルーチンが呼び出されました。[l][r]
画面を消去(改ページ)します。[p][cm]
サブルーチンを終了します。[l][r]
[return]
```
> > 関連タグ :
    * [jump](#jump.md)
    * [return](#return.md)
> > 属性 :<br />
| **属性名** | **別名** | **必須** | **値** | **デフォルト値** | **説明** |
|:--------|:-------|:-------|:------|:-----------|:-------|
| target  | name   | **yes** | ラベル名(文字列) | nil        | サブルーチン名を指定します。fileが指定されない場合は現在のファイルを、指定された場合はそのファイルからサブルーチンを検索し、呼び出します。 |
| file    | src<br />storage<br />filename | no     | シナリオファイル名(文字列) | 現在実行中のファイル | サブルーチンが記述されているシナリオファイル名を指定します。 |

<br />
  * ## cm ##
> > 属性 :
> > > なし

> > Clear Messageの略です。メッセージレイヤの内容を消去し、実質的に改ページの役割を果たします。[p](#p.md)タグと併用することで、改ページの前にクリック待ちをすることができます。
> > 使用例 :
```
ここで改行[r]
ここでクリック待ちしてから改行[l][r]
ここでクリック待ちしてから改ページ[p][cm]   
```
> > 関連タグ :
      * [p](#p.md)
      * [r](#r.md)

<br />
  * ## debug ##
> > デバッグウィンドウを表示し、デバッグモードをスタートします。デバッグモード中はデバッグメッセージがウィンドウに表示されます。<br />
> > 使用例 : <br />
```
// デバッグモードに入る
[debug enable]
// デバッグメッセージを送る
[debug text="デバッグメッセージ"]
```
> > 属性 : <br />
| **属性名** | **別名** | **必須** | **値** | **デフォルト値** | **説明** |
|:--------|:-------|:-------|:------|:-----------|:-------|
| enable  | start  | no     | 真偽値   | nil        | trueの時、デバッグモードを開始します。 |
| disable | stop   | no     | 真偽値   | nil        | trueの時、デバッグモードを終了します。 |
| message | msg<br />text | no     | デバッグメッセージ(文字列) | nil        | 指定された場合、現在時刻と共にデバッグメッセージとして送信されます。 |

<br />
  * ## else ##
> > [if](#if.md)タグと併用して、条件構文を構成します。直前の[if](#if.md)タグか[elseif](#elseif.md)タグの条件が満たされなかった場合に、このタグへジャンプして、その内容が実行されます。<br />
> > 使用例 : ([if](#if.md)タグを参照)<br />
> > 関連タグ :
      * [elseif](#elseif.md)
      * [endif](#endif.md)
      * [if](#if.md)

<br />
  * ## elseif ##
> > [if](#if.md)タグと併用して、条件構文を構成します。直線の[if](#if.md)タグかelseifタグの条件が満たされなかった場合に、このタグの条件がチェックされ、もし満たされる場合はその内容が実行され、そうでない場合は直後のelseifタグか[else](#else.md)タグ、あるいは[endif](#endif.md)タグまでジャンプします。<br />
> > 使用例 : ([if](#if.md)タグを参照) <br />
> > 関連タグ :
      * [else](#else.md)
      * [endif](#endif.md)
      * [if](#if.md)
> > 属性値 : ([if](#if.md)タグと同様) <br />

<br />
  * ## endif ##
> > [if](#if.md)タグで始まる条件構文の終了を意味します。[#if](#if.md)タグに対応するendifタグが検出されない場合はエラーメッセージがデバッグウィンドウに送られます。<br />
> > 使用例 : ([if](#if.md)タグを参照) <br />
> > 関連タグ :
      * [else](#else.md)
      * [elseif](#elseif.md)
      * [if](#if.md)

<br />
  * ## endmacro ##
> > [macro](#macro.md)タグで始まるマクロ定義の終了を意味します。[#macro](#macro.md)タグに対応するendmacroタグが検出されない場合はエラーメッセージがデバッグウィンドウに送られ、マクロ定義は失敗します。<br />
> > 使用例 : ([macro](#macro.md)タグを参照)<br />
> > 関連タグ :
      * [macro](#macro.md)

<br />
  * ## eval ##
> > 与えられたコードをプログラミング言語Luaの構文であるとみなし、実行します。主に変数の初期化、代入などに用いますので、代入式だけ理解していれば十分です。詳しくは[#インラインスクリプト インラインスクリプト]を参照にして下さい。<br />
> > 使用例 :
```
// 変数tmp.xに100を代入(初期化)する
[eval code="tmp.x = 100"]
// 変数tmp.xの内容を表示
X座標: [print text=(tmp.x)][r]
// 変数tmp.xに1を加え更新する
[eval code="tmp.x = tmp.x + 1"]
// もう一度変数tmp.xの内容を表示
X座標: [print text=(tmp.x)][p][cm]
```
> > 関連タグ :
    * [print](#print.md)
> > 属性 :<br />
| **属性名** | **別名** | **必須** | **値** | **デフォルト値** | **説明** |
|:--------|:-------|:-------|:------|:-----------|:-------|
| code    | exp<br />expr<br />expression | **yes** | 実行コード(文字列) | nil        | 実行するLuaステートメントを指定します。指定されない場合はタグ実行に失敗します。 |

  * ## exit ##
> > このタグが実行されると、システム全体に終了処理を要求します。<br />
> > 使用例 : <br />
```
// ウィンドウが閉じられようとした時に#game_endラベルへジャンプ
[set event="on_quit" jump="#game_end"]

#game_end
// ゲーム終了
[exit]
```
> > 関連タグ : <br />
      * [set](#set.md)

<br />
  * ## font ##
> > フォントの書式を変更したり元に戻したりします。<br />
> > 使用例 :
```
// フォント書式をデフォルト値に戻す
[font reset]
例えば[font color="red"]特定単語[font reset]を赤文字にしたり、[r]
文字を一回り大きくして[font bigger]強調表現[font reset]したりできます。[p][cm]
```
> > 属性 :<br />
| **属性名** | **別名** | **必須** | **値** | **デフォルト値** | **説明** |
|:--------|:-------|:-------|:------|:-----------|:-------|
| reset   | clear  | no     | 真偽値   | nil        | 書式情報を初期値に戻すかどうかを指定します。resetがtrueで、更に他の書式情報も与えられた場合は、まず初期化してから書式変更されます。 |
| relative | rel    | no     | 真偽値   | **true**   | sizeでフォントサイズを指定する時に相対(差分)サイズで指定するかどうかを定めます。absoluteがfalseの時、あるいはbiggerかsmallerかtrueの時には強制的にrelativeはtrueになります。 |
| absolute | abs    | no     | 真偽値   | nil        | sizeでフォントサイズを指定する時に絶対サイズで指定するかどうかを定めます。relativeがtrueの時、absoluteは強制的にfalseになります。 |
| color   |        | no     | 色名(文字列)、あるいは<br />文字コード(0xAARRGGBB形式の数値) | nil        | 新しいフォント色を指定します。文字列で色名を与える場合、現在"black"、"blue"、"green"、"red"、"trans"(透明色)、"white"が有効です。数値で指定する場合は0xAARRGGBB(16進数でそれぞれ2桁の不透明度、赤成分、緑成分、青成分)の形式で指定して下さい。 |
| size    |        | no     | フォントサイズ(整数値) | nil        | 新しいフォントサイズをピクセル単位で指定します。relativeがtrueの場合(デフォルト)では差分サイズ、absoluteがtrueの時は絶対サイズで指定して下さい。biggerかsmallerがtrueの時にはこの値は無視されます。 |
| bigger  | big    | no     | 真偽値   | nil        | フォントサイズを大きくするかどうかを指定します。trueが指定された場合、強制的にrelativeはtrue、sizeは2に設定されます。単純に現在のフォントより大きくしたい場合に用います。 |
| smaller | small  | no     | 真偽値   | nil        | フォントサイズを小さくするかどうかを指定します。trueが指定された場合、強制的にrelativeはtrue、sizeは-2に設定されます。単純に現在のフォントより小さくしたい場合に用います。 |

<br />
  * ## if ##
> > [elseif](#elseif.md)タグ、[else](#else.md)タグ、[endif](#endif.md)などと共に制御構文を構成します。最初にifタグのcond属性の値がチェックされ、それがtrueであった場合(厳密にはfalseかnil以外の値であった場合)には、そのifタグの直後の内容が実行されます。cond属性の値がnilかfalseであった場合には、直後に検出されたelseifタグ、elseタグ、endifタグへジャンプして、処理が続行されます。ifタグに対応するendifタグが検出されない場合はエラーになりますが、elseifやelseタグは必須ではありません。<br />
> > 同様の処理はラベルと[jump](#jump.md)タグによって実現可能ですが、if構文の場合はラベルによる名前衝突の恐れがなく、ラベルを使うよりもコンパクトに書くことができます。逆にif構文の中にラベルを書くことはバグを生む原因になるので避けて下さい。<br />
> > 使用例 : <br />
```
// test_caseで渡すパラメーターの値を変えながらサブルーチンを呼ぶ
[call target="#sub_condition" test_case="1"]
[call target="#sub_condition" test_case="2"]
[call target="#sub_condition" test_case="3"]
[s]

*sub_condition
// 変数args.test_caseの値によって処理を変える
[if cond=(args.test_case == "1")]
  1番目のケースです。
[elseif cond=(args.test_case == "2")]
  2番目のケースです。
[else]
  それ以外のケースです。
[endif]
[return]
```
> > 関連タグ :
      * [else](#else.md)
      * [elseif](#elseif.md)
      * [endif](#endif.md)
      * [eval](#eval.md)
> > <br />
> > 属性 : <br />
| **属性名** | **別名** | **必須** | **値** | **デフォルト値** | **説明** |
|:--------|:-------|:-------|:------|:-----------|:-------|
| cond    | condition<br />val<br />value | **yes** | 式     | falseかnil以外の値が指定された場合には条件が満たされたと判断されてタグ直後の内容が実行されます。**0や負の数\*が与えられた場合でも条件が満たされるということに注意。**|
| code    | exp<br />expr<br />expression | no     | Luaコード(文字列) | condと異なり、文字列を受け取った後にそれをLuaコードとして解釈して実行、その結果によって真偽が判断されます。 |

<br />
  * ## img ##
> > 画像レイヤーを操作し、レイヤー表示のオン/オフや、画像のロード、座標指定など様々な設定を行います。<br />
> > 使用例 :
```
// 新しい背景画像をロード
[img layer="bg" src="bg001.png"][wait time=1]
// 新しい背景画像を2秒かけてクロスフェード
[img layer="bg" src="bg002.png" effect='cross_fade' duration=2][wait time=1]
// 前景レイヤー1を非表示にする
[img layer=1 hide][wait time=1]
// 前景レイヤー1に新しい画像をロードして、横は画面中央、縦は下端に合わせて表示する
[img layer=1 show src='fg001.png' cx=0 by=0][wait time=1]
// 前景レイヤー1を半透明にして表示する
[img layer=1 alpha=128][wait time=1]
```
> > 関連タグ :
    * [map](#map.md)
    * [msg](#msg.md)
> > 属性 :<br />
| **属性名** | **別名** | **必須** | **値** | **デフォルト値** | **説明** |
|:--------|:-------|:-------|:------|:-----------|:-------|
| layer   | name   | **yes** | レイヤー名(文字列)<br />レイヤー番号(整数値) | nil        | 操作対象となるレイヤーを指定します。指定されない場合はタグ実行に失敗します。 |
| lx      | left<br />left\_x | no     | 画像左端X座標(数値) | 元の値        | 左端を起点(0)とした、右方向の\*画像左端の\*X座標を指定します。 |
| x       |        | no     | 画像中央X座標(数値) | nil        | 左端を起点(0)とした、右方向の\*画像中央の\*X座標を指定します。指定された場合、lxよりも優先されます。 |
| cx      | center\_x | no     | 中央基準X座標(数値) | nil        | 画面中央に画像中央が合う位置を起点(0)とした右方向のX座標(数値)を指定します。属性値cxが設定された場合は属性値xは無視されます。 |
| rx      | right\_x<br />right | no     | 右端基準X座標(数値) | nil        | 画面右端に画像右端が合う位置を起点(0)とした\*右方向\*のX座標を指定します。属性値rxが指定された場合は属性値xとcxは無視されます。右端を基準に左に画像を表示したい場合は負の数値(マイナス)を指定して下さい。 |
| y       | top\_y<br />top | no     | Y座標(数値) | 元の値        | 上端を起点(0)とした、下方向のY座標を指定します。 |
| cy      | center\_y | no     | 中央基準Y座標(数値) | nil        | 画面中央に画像中央が合う位置を起点(0)とした下方向のY座標を指定します。属性値cyが設定された場合は属性値yは無視されます。 |
| by      | bottom\_y<br />bottom | no     | 下端基準Y座標(数値) | nil        | 画面下端に画像下端が合う位置を起点(0)とした下方向のY座標を指定します。属性値byが設定された場合は属性値yとcyは無視されます。下端を基準に上に画像を表示したい場合は負の数値(マイナス)を指定して下さい。 |
| src     | storage | no     | ファイル名(文字列) | nil        | ファイル名を指定します。パスの通ったフォルダ内にある場合は、フォルダ名はつけずに"ファイル名"だけでOKです。|
| effect  | mode   | no     | "cross\_fade"<br />"fade\_out" | nil        | 指定された場合は対応するエフェクト(トランジション)が実行されます。 |
| duration | time   | no     | 実行時間(数値) | 1          | effectが指定された場合に、どれくらい時間をかけて実行されるか\*秒単位\*の数値で指定します。少数も設定可能なので、ミリ秒単位の場合は0.001をかけた数値を指定して下さい。 |
| show    | visible | no     | 真偽値   | nil        | レイヤーを表示するかどうかを決める真偽値を指定します。指定されない場合は前回と同じ状態を保ちます。 |
| hide    | unvisible | no     | 真偽値   | nil        | showと逆の意味を持ちます。 |
| alpha   | a<br />opaque | no     | 整数値(0から255) | 元の値        | レイヤーのアルファチャンネル(不透明度)の数値で指定します。256段階で0が完全透明、255が完全不透明です。省略された場合は同じ状態を保ちます。 |


  * ## jump ##
> > 指定されたラベルにジャンプします。あるシナリオファイルの終わりから、別のシナリオファイルのイベントに移りたい時などに用います。<br />
> > 使用例 :
```
現在のシナリオファイルの終了地点に来ました。[r]
クリックすると次のシナリオファイルの開始地点に跳びます。[p][cm]
[jump target="next#start"]
```
> > 関連タグ :
    * [call](#call.md)
    * [link](#link.md)
> > 属性 :<br />
| **属性名** | **別名** | **必須** | **値** | **デフォルト値** | **説明** |
|:--------|:-------|:-------|:------|:-----------|:-------|
| target  | to     | **yes** | ラベル名(文字列) | nil        | ジャンプ先のファイル名#ラベル名の形で指定します。指定されない場合はタグ実行に失敗します。 |

  * ## l ##
> > 属性 :
> > > なし

> > Line waitingの略です。改行クリック待ちのアイコンを表示させ、ユーザにクリックを促します。クリックされるまでスクリプト読み込みは停止し、クリック確認後に動き出します。実際に改行をするのは [r](#r.md) タグなので、これと併用する必要があるでしょう。<br />
> > 使用例 :
```
ここで改行[r]
ここでクリック待ちしてから改行[l][r]
ここでクリック待ちしてから改ページ[p][cm]   
```
> > 関連タグ :
      * [p](#p.md)
      * [r](#r.md)

  * ## link ##
> > クリック時に特定のラベルにジャンプするテキストを表示します。選択肢表示の時などに用います。<br />
> > 使用例 :
```
// 新しい選択肢を表示
[select][cm]
選択肢を選んで下さい。[r]
[r]
・[link text="選択肢1" goto="#sel1"][r]
[r]
・[link text="選択肢2" goto="#sel2"][r]
[s]

#sel1 | 選択肢1
選択肢1が選択されました。[p][cm]
[jump to="#common"]

#sel2 | 選択肢2
選択肢2が選択されました。[p][cm]
[jump to="#common"]

#common | 共通シーン
[cm]
共通シーンです。
[s]
```
> > 関連タグ :
    * [jump](#jump.md)
    * [s](#s.md)
    * [select](#select.md)
> > 属性 :<br />
| **属性名** | **別名** | **必須** | **値** | **デフォルト値** | **説明** |
|:--------|:-------|:-------|:------|:-----------|:-------|
| target  | goto<br />to | **yes** | ラベル名(文字列) | nil        | クリック時のジャンプ先をファイル名#ラベル名の形で指定します。 |
| text    | string | no     | 表示テキスト(文字列) | nil        | 表示するテキストを指定します。imageが指定されて、それが存在する場合はテキストは表示されません。textもimageも存在しない場合はタグ実行に失敗します。 |
| image   | img    | no     | 画像ファイル名(文字列) | nil        | 表示する画像ファイル名を指定します。存在しない場合はtextを代わりに表示しますが、textも指定されない場合はタグ実行に失敗します。 |
| hover   | hover\_image<br />hover\_img | no     | 画像ファイル名(文字列) | nil        | マウスオーバー時に表示する画像ファイル名を指定します。存在しない場合はマウスオーバー時もimageで指定された画像を表示します。 |

<br />
  * ## load ##
> > セーブデータをロードします。<br />
> > 使用例 :
```
// ログ番号1をパラメーターとして渡してロード用の処理を呼び出す
[call target="#load_log" load_id="1"]

#load_log
// ログ番号を変数から取り出し、ログデータをロードする
[if cond=(args.load_id)]
  [load log id=(args.load_id)]
[else]
  [debug text="ログ番号がありません"]
  [return]
[endif]
```
> > 関連タグ : <br />
      * [eval](#eval.md)
      * [jump](#jump.md)
      * [save](#save.md)
> > 属性 : <br />
| **属性名** | **別名** | **必須** | **値** | **デフォルト値** | **説明** |
|:--------|:-------|:-------|:------|:-----------|:-------|
| log     | game   | **yes** | 真偽値   | nil        | ログデータの読み込みを有効にします。trueが指定されない場合は何もしません。 |
| id      | name   | **yes** | ログID(数値か文字列) | nil        | 読み込み対象となるログIDを指定します。省略されるとロードに失敗します。 |

<br />
  * ## logging ##
> > バックログの記録モードを変更します。タイトル画面の遷移など、メッセージと関係ない部分では記録モードをオフにする必要があります。<br />
> > 使用例 :
```
// ログ記録モードをオフにする
[logging off]
記録したくないメッセージ。[r]
// ログ記録モードをオンにする
[logging on]
```
> > <br />
> > 属性 :<br />
| **属性名** | **別名** | **必須** | **値** | **デフォルト値** | **説明** |
|:--------|:-------|:-------|:------|:-----------|:-------|
| on      | enable | no     | 真偽値   | nil        | ログ記録モードを有効にするかどうかを指定します。指定されない場合は何もしません。 |
| off     | disable | no     | 真偽値   | nil        | ログ記録モードを無効にするかどうかを指定します。 |

<br />
  * ## macro ##
> > [macro](#endmacro.md)タグと併用してマクロを定義します。マクロに関する説明は書式の[#マクロ マクロの項目]を参照して下さい。<br />
> > 使用例 : <br />
```
// 新しいマクロを"マクロ1"という名前で定義
[macro name="マクロ1"]
  [font bigger]お決まりの文句を大きめの文字で表示[font reset][r]
[endmacro]

// マクロ1を二回連続で呼び出す
[マクロ1][マクロ1]

// 新しいマクロを定義し、パラメーターを使う
[macro name="色指定"]
  [font color=(args.color or "red")][print text=(args.text or "デフォルト")][font reset]
[endmacro]

// マクロ呼び出し
[色指定 color="blue" text="青文字"]
```
> > 属性 : <br />
| **属性名** | **別名** | **必須** | **値** | **デフォルト値** | **説明** |
|:--------|:-------|:-------|:------|:-----------|:-------|
| name    | record | **yes** | マクロ名(文字列) | nil        | マクロの名前を指定します。省略された場合はマクロ定義に失敗します。 |
| reset   | rewrite | no     | 真偽値   | nil        | trueが指定された場合は同名の既存のマクロ定義を破棄してから再定義を行います。省略されて同名のマクロが既に存在する場合は古いマクロ定義がそのまま残ります。 |

<br />
  * ## map ##
> > 画像マップレイヤーを操作し、新しい画像をマッピングしたり、クリック可能にしたりして、特定ラベルにジャンプしたりできるようにします。<br />
> > 使用例 :
```
// トップレイヤのマッピングを生成、非表示にしてクリア
[map layer='top' create hide clear]
// トップレイヤ中央上の方に画像ボタンを表示し、クリック時にシナリオファイルnext_scenarioのラベルnextへジャンプするようにする
[map layer='top' src='next.png' hover='next_hover.png'
 file='next_scenario' jump='next' cx=0 cy=-100]
// トップレイヤ中央下の方に画像ボタンを表示し、クリック時にシナリオファイルexit_scenarioのラベルexitへジャンプするようにする
[map layer='top' src='exit.png' hover='exit_hover.png'
 file='exit_scenario' jump='exit' cx=0 cy=100]
// トップレイヤのセッティングができたので表示する
[map layer='top' show]
```
> > 関連タグ : <br />
    * [img](#img.md)
    * [msg](#msg.md)
> > 属性 :<br />
| **属性名** | **別名** | **必須** | **値** | **デフォルト値** | **説明** |
|:--------|:-------|:-------|:------|:-----------|:-------|
| layer   | name   | **yes** | レイヤー名(文字列)<br />レイヤー番号(整数値) | nil        | 操作対象とするレイヤーを指定します。指定されない場合はタグ実行に失敗します。 |
| lx      | left<br />left\_x | no     | 画像左端X座標(数値) | 元の値        | 左端を起点(0)とした、右方向の\*画像左端の\*X座標を指定します。 |
| x       |        | no     | 画像中央X座標(数値) | nil        | 左端を起点(0)とした、右方向の\*画像中央の\*X座標を指定します。指定された場合、lxよりも優先されます。 |
| cx      | center\_x | no     | 中央基準X座標(数値) | nil        | 画面中央に画像中央が合う位置を起点(0)とした右方向のX座標(数値)を指定します。属性値cxが設定された場合は属性値xは無視されます。 |
| rx      | right\_x<br />right | no     | 右端基準X座標(数値) | nil        | 画面右端に画像右端が合う位置を起点(0)とした\*右方向\*のX座標を指定します。属性値rxが指定された場合は属性値xとcxは無視されます。右端を基準に左に画像を表示したい場合は負の数値(マイナス)を指定して下さい。 |
| y       | top\_y<br />top | no     | Y座標(数値) | 元の値        | 上端を起点(0)とした、下方向のY座標を指定します。 |
| cy      | center\_y | no     | 中央基準Y座標(数値) | nil        | 画面中央に画像中央が合う位置を起点(0)とした下方向のY座標を指定します。属性値cyが設定された場合は属性値yは無視されます。 |
| by      | bottom\_y<br />bottom | no     | 下端基準Y座標(数値) | nil        | 画面下端に画像下端が合う位置を起点(0)とした下方向のY座標を指定します。属性値byが設定された場合は属性値yとcyは無視されます。下端を基準に上に画像を表示したい場合は負の数値(マイナス)を指定して下さい。 |
| create  |        | no     | 真偽値   | nil        | trueが指定され、かつlayerで指定された名前のレイヤーが存在しない場合に、新しいレイヤーを生成しlayerで指定された名前をつけ、最上位に設定します。非表示状態で生成されるので、showで表示設定するまでは何も表示されません。 |
| clear   |        | no     | 真偽値   | nil        | レイヤー操作の前にレイヤーをクリアするかどうかを決めます。新しく画像をマッピングを開始したい場合はtrue、以前の状態のまま続行(重ね貼り)したい場合はこの属性を省略します。 |
| delete  |        | no     | 真偽値   | nil        | trueが指定された場合、layerで指定された名前のレイヤーを削除します。使用していたメモリが解法されますが、近いうちに再度使いたい場合はhideの方が効率的かも知れません。 |
| above   | set\_top | no     | 真偽値   | nil        | trueが指定された場合、layerで指定された名前のレイヤーを最上位へ移動します。ユーザに何かを選択させるようなメニューは最前面に表示されている必要があるのでこの属性を用いると良いでしょう。 |
| src     | storage<br />image | no     | ファイル名(文字列) | nil        | 新しい画像をロードしてマッピングしたい場合に、ファイル名を指定します。テキストをマッピングしたい場合は必要ありません。 |
| hover   | hover\_image | no     | ファイル名(文字列) | nil        | srcで指定された画像上にマウスカーソルがある時に表示したい画像を指定できます。srcが指定されない場合はhoverも意味を成しません。 |
| alpha   | a<br />opaque | no     | 整数値(0から255) | 255        | マッピングする画像のアルファチャンネル(不透明度)を数値で指定します。256段階で0が完全透明、255が完全不透明です。 |
| text    | string | no     | 表示文字列 | nil        | 画像指定の代わりに、テキストを画像化してマッピングします。srcが指定されている場合はtextは無視されます。 |
| show    | visible | no     | 真偽値   | nil        | レイヤーを表示するかどうかを決定する真偽値を指定します。 |
| hide    | unvisible | no     | 真偽値   | nil        | showと逆の意味を持ちます。 |
| jump    | goto   | no     | ラベル名(文字列) | nil        | 指定された場合、マッピングした画像がクリックされた場合に、そのラベルへジャンプします。 |
| call    |        | no     | ラベル名(文字列) | nil        | 指定された場合、マッピングした画像がクリックされた場合に、そのラベルをコールします。([return](#return.md)タグで復帰可能) |
| click\_se | click\_sound | no     | ファイル名(文字列) | nil        | マッピングした画像がクリックされた時に効果音として再生するサウンドファイルを指定します。 |
| hover\_se | hover\_sound | no     | ファイル名(文字列) | nil        | 指定された画像上をマウスカーソルが通る時に効果音として再生するサウンドを指定します。 |

<br />
  * ## msg ##
> > Messageの略です。メッセージレイヤーに関する操作を行います。Kanafでは初期状態で"message"(標準メッセージレイヤー)と"select"(選択肢用レイヤー)をセットアップしますが、それ以外のメッセージレイヤーを生成したり切り替えたりすることも可能です。
> > 使用例 :
```
// 全てのメッセージレイヤーを非表示にする
[msg hide all]
// 標準メッセージレイヤーをアクティベーション(書き込み先として選択)し、表示する
[msg layer="message" activate]
```
> > 関連タグ :
    * [select](#select.md)
> > 属性 :<br />
| **属性名** | **別名** | **必須** | **値** | **デフォルト値** | **説明** |
|:--------|:-------|:-------|:------|:-----------|:-------|
| layer   | name   | no     | レイヤー名(文字列) | **"active"** | 操作対象とするメッセージレイヤーの名前を指定します。省略された場合は現在アクティブ(書き込み先として選択されている)なメッセージレイヤーが指定されます。 |
| all     |        | no     | 真偽値   | nil        | showかhideがtrueの時のみ、layerを無視して全てのメッセージレイヤーに対して操作を行います。 |
| create  | new    | no     | 真偽値   | nil        | trueが指定され、layerで指定された名前のレイヤーが存在しない場合、新しいメッセージレイヤーを生成します。 |
| delete  | del<br />remove | no     | 真偽値   | nil        | trueが指定され、layerで指定された名前のレイヤーが存在する場合、そのレイヤーを削除します。 |
| activate | act    | no     | 真偽値   | nil        | trueが指定された場合、対象メッセージレイヤーをアクティベーション(書き込み先として選択)します。 |
| show    | visible | no     | 真偽値   | nil        | trueが指定された場合、対象メッセージレイヤーを表示します。allがtrueの場合、全てのメッセージレイヤーを表示設定します。 |
| hide    | unvisible | no     | 真偽値   | nil        | trueが指定された場合、対象メッセージレイヤーを非表示にします。allがtrueの場合、全てのメッセージレイヤーを非表示にします。 |
| x       |        | no     | X座標(整数値) | 元の値か0      | 指定された場合、対象メッセージレイヤーの左端を基準とした右方向への新しいX座標が設定されます。 |
| y       |        | no     | Y座標(整数値) | 元の値か0      | 指定された場合、対象メッセージレイヤーの上端を基準とした下方向への新しいY座標が設定されます。 |
| w       | width  | no     | 横幅(整数値) | 元の値かウィンドウ幅 | 指定された場合、対象メッセージレイヤーの横幅が設定されます。 |

<br />
  * ## p ##
> > 属性 :
> > > なし

> > Page waitingの略です。改ページクリック待ちのアイコンを表示させ、ユーザにクリックを促します。クリックされるまでスクリプト読み込みは停止し、クリック確認後に動き出します。実際に改ページをするのは [cm](#cm.md) タグなので、これと併用する必要があるでしょう。<br />
> > 使用例 :
```
ここで改行[r]
ここでクリック待ちしてから改行[l][r]
ここでクリック待ちしてから改ページ[p][cm]   
```
> > 関連タグ :
      * [cm](#cm.md)
      * [l](#l.md)

  * ## print ##
> > 指定されたテキストやルビを表示します。主に変数の中身を書き出したい時や、ルビ付き単語を表示したい時に用います。<br />
> > 使用例 :
```
ルビ付きの[print text="単語" ruby="たんご"]を表示します。[r]
// 変数代入
[[ tmp.content = "中身" ]]
変数の[print text=(tmp.content)]を表示します。[p][cm]
```
> > 関連タグ :
    * [eval](#eval.md)
> > 属性 :<br />
| **属性名** | **別名** | **必須** | **値** | **デフォルト値** | **説明** |
|:--------|:-------|:-------|:------|:-----------|:-------|
| text    | string<br />txt | no     | 任意    | nil        | 表示するテキストを指定します。nil以外の全ての値はタグ内で文字列型に変換してから表示されます。 |
| code    | exp<br />expr<br />expression | no     | Luaコード(文字列) | nil        | Luaコードとして評価したい文字列を指定します。textが指定されている場合、こちらは無視されます。どちらも指定されない場合はタグ実行に失敗します。 |
| ruby    |        | no     | ルビテキスト(文字列) | nil        | ルビとしてテキストの上に書き添えたいテキストを指定します。指定された場合のみルビ付きテキストが生成されます。 |

<br />
  * ## r ##
> > 属性 :
> > > なし

> > Returnの略です。メッセージレイヤー上のテキストを改行させます。 [l](#l.md) タグと併用することで、クリック待ちしてから改行するようにもできます。<br />
> > 使用例 :
```
ここで改行[r]
ここでクリック待ちしてから改行[l][r]
ここでクリック待ちしてから改ページ[p][cm]   
```
> > 関連タグ :
      * [cm](#cm.md)
      * [l](#l.md)

<br />
  * ## return ##
> > サブルーチン処理の終了ポイントを意味します。 [call](#call.md)タグの呼び出し先のラベルでの処理を終えて、呼び出し元に戻ります。callされていないのにreturnを呼び出してしまったり、逆にcallしたのにreturnされないような処理を書くと不具合の原因になってしまうので要注意です。<br />
> > > 使用例 : ([call](#call.md)を参照) <br />
> > > 関連タグ :
        * [call](#call.md)

<br />
  * ## s ##

> > Stopの略です。選択肢のクリック待ちをしたりして、勝手にシナリオが先に進んでしまうと困る場合に用います。このタグが実行されると、選択肢クリックなどの別のイベントが起こるまで永遠に待機します。<br />
> > 使用例 : ([link](#link.md)を参照)<br />
> > 関連タグ :
    * [link](#link.md)
    * [map](#map.md)
    * [select](#select.md)

<br />
  * ## save ##
> > ログデータと最後にキャプチャーされたスクリーンショットをセーブします。<br />
> > 使用例 :
```
// ログ番号1をパラメータとして渡してセーブ用の処理を呼び出す
[call target="#save_log" save_id="1"]

#save_log
// ログ番号を変数から取り出し、ログデータをセーブする
[if cond=(args.save_id)]
  [load log id=(args.save_id)]
[else]
  [debug text="ログ番号がありません"]
[endif]
[return]
```
> > 関連タグ : <br />
      * [eval](#eval.md)
      * [jump](#jump.md)
      * [load](#load.md)
> > 属性 : <br />
| **属性名** | **別名** | **必須** | **値** | **デフォルト値** | **説明** |
|:--------|:-------|:-------|:------|:-----------|:-------|
| log     | game   | **yes** | 真偽値   | nil        | ログデータの書き込みを有効にします。trueが指定されない場合は何もしません。 |
| id      | name   | **yes** | ログID(数値か文字列) | nil        | 書き込み対象となるログIDを指定します。省略されるとセーブに失敗します。 |

<br />
  * ## screenshot ##
> > 現在画面に表示されている内容を画像化してメモリ上に記憶します。<br />
> > 関連タグ :
      * [save](#save.md)

<br />
  * ## select ##
> > 属性 :
> > > なし

> > メッセージの書き出し先を選択肢用のレイヤーに切り替え、ログ記録モードを一時的にオフにします。メッセージ用のレイヤーと選択肢用のレイヤーを使い分ける際に便利で、選択肢を作る[link](#link.md)タグを使う前にこのタグを入れると、選択肢用のレイヤーのみの表示になり、いずれかの選択肢が選ばれた時にメッセージレイヤーのみの表示に切り替わり、ログ記録モードがオンになります。<br />
> > このタグは実質的に、
```
[logging off]
[msg hide all]
[msg layer="select" activate]
```
> > とすることと等価になります。<br />
> > 使用例 : ([link](#link.md)を参照)<br />
> > 関連タグ :
    * [link](#link.md)

  * ## snd ##
> > サウンドミキサーをスロット毎に操作します。<br />
> > 使用例 :
```
// スロット番号1番で、BGMとしてサウンドファイル"bgm.ogg"を再生する。
[snd slot=1 src="bgm.ogg" play]
[wait time=1]
// スロット番号1番で流れているサウンドを一時停止する。
[snd slot=1 pause]
[wait time=1]
// スロット番号1番で開かれているサウンドの再生を再開する。
[snd slot=1 play]
// 自動スロットで効果音としてサウンドファイル"se1.ogg"と"se2.ogg"を再生する。
[snd src="se1.ogg" play]
[snd src="se2.ogg" play]
```
> > 属性 :<br />
| **属性名** | **別名** | **必須** | **値** | **デフォルト値** | **説明** |
|:--------|:-------|:-------|:------|:-----------|:-------|
| slot    |        | no     | スロット番号(0以上の整数) | 0          | ミキサーの操作対象とするスロットを指定します。デフォルト値の0は特殊なケースで、再生中のスロットと重ならないように新しいスロットを割り当てて再生を開始し、再生終了すると自動的に閉じられます(ただしリピート再生、再生中断や続行、待機などができないので、効果音向けです)。1以上の数値の場合は対応するスロットに最大1つのサウンドデータが結び付けられ、様々な操作が可能になります。スロット番号の大きさに制限はありませんが、必要以上に多くのスロットを開きっぱなしにすると消費メモリが増加します。 |
| src     | file<br />storage | no     | ファイル名(文字列) | nil        | load、open、playのいずれかがtrueの場合、あるいはslotに0が指定された場合にスロットに結び付けられるファイル名を指定します。 |
| clear   | close  | no     | 真偽値   | nil        | trueが指定された時、結び付けられたサウンドデータを解放し、スロットを閉じます。 |
| load    |        | no     | 真偽値   | nil        | trueが指定された時、サウンドデータを全てメモリ上にロードします。OGGのような圧縮エンコーディングされたデータも全てデコーディングされますが重い処理なので、数分間にまたがる音声は基本的に"load"より"open"を推奨します。 |
| open    |        | no     | 真偽値   | nil        | trueが指定された時、サウンドファイルを開き、リアルタイムにデコーディングする準備をします。 |
| pause   | stop   | no     | 真偽値   | nil        | trueが指定された時、再生中のサウンドを一時停止します。clearとは違い、まだサウンドデータは確保したままにします。 |
| play    |        | no     | 真偽値   | nil        | trueが指定された時、サウンドの再生/続行を行います。srcにファイル名が指定された場合は自動的に"open"してから再生を開始し、srcが省略された場合は前回中断した音声再生を続行します。 |
| repeat  | loop<br />repeating | no     | 真偽値   | false      | サウンド再生時に、リピート再生するかどうかを指定します。trueの時は、playも強制的にtrueになります。 |
| replay  |        | no     | 真偽値   | false      | trueの時、対象スロットの現在再生中、あるは再生終了した音声を巻き戻して最初から音声を再生します。 |
| wait    | waiting | no     | 真偽値   | nil        | trueが指定された時、対象スロットの音声再生が終了するまでシナリオ処理を停止し、終了と同時に続行します。リピートモードで再生中の時は、強制的にリピートを解除します。 |

  * ## wait ##
> > 指定時間だけシナリオ処理を停止して待機モードに入ります。あえてメッセージに間を持たせたいような演出などに用います。(指定時間はミリ秒単位ではなく、秒単位であることに注意。)<br />
> > 使用例 :
```
メッセージ1[wait time=0.5] メッセージ2 ...[wait time=0.5][r]
メッセージ3！！！[p][cm]
```
> > 属性 :<br />
| **属性名** | **別名** | **必須** | **値** | **デフォルト値** | **説明** |
|:--------|:-------|:-------|:------|:-----------|:-------|
| time    | delay<br />duration | no     | 待機時間(秒単位の数値) | 1          | 待機する時間を秒単位で指定します。ミリ秒単位で待機したい場合は、0.001をかけた数値を指定して下さい。 |